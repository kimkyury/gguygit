---
import ThoughtsPostLayout from '../../layouts/ThoughtsPostLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const entries = await getCollection('thoughts');
  return entries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry }
  }));
}

const { entry } = Astro.props;
const { Content, headings } = await entry.render();
const formatDate = (date: Date) =>
  date.toISOString().slice(0, 10).replace(/-/g, '.');
---

<ThoughtsPostLayout
  title={entry.data.title}
  date={formatDate(entry.data.date)}
  datePublished={entry.data.date.toISOString()}
  cover={entry.data.cover}
  summary={entry.data.summary}
  headings={headings}
>
  <Content />
</ThoughtsPostLayout>
